"use strict";(self.webpackChunkvckit_documentation=self.webpackChunkvckit_documentation||[]).push([[4849],{6961:(e,n,t)=>{t.d(n,{Ay:()=>a});var s=t(4848),i=t(8453);function r(e){const n={admonition:"admonition",p:"p",...(0,i.R)(),...e.components};return(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Please note that this content is under development and is not ready for implementation. This status message will be updated as content development progresses."})})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},7275:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var s=t(4848),i=t(8453),r=t(6961);const a={sidebar_label:"Basic Operations",sidebar_position:3},d="Basic Operations",o={id:"get-started/api-server-get-started/basic-operations",title:"Basic Operations",description:"Let's use the API docs at http3332/api-docs to try some basic functions.",source:"@site/versioned_docs/version-1.0.0/get-started/api-server-get-started/basic-operations.md",sourceDirName:"get-started/api-server-get-started",slug:"/get-started/api-server-get-started/basic-operations",permalink:"/docs/get-started/api-server-get-started/basic-operations",draft:!1,unlisted:!1,editUrl:"https://github.com/uncefact/project-vckit/tree/main/versioned_docs/version-1.0.0/get-started/api-server-get-started/basic-operations.md",tags:[],version:"1.0.0",sidebarPosition:3,frontMatter:{sidebar_label:"Basic Operations",sidebar_position:3},sidebar:"getStartedSideBar",previous:{title:"Installation",permalink:"/docs/get-started/api-server-get-started/installation"},next:{title:"CLI",permalink:"/docs/category/cli"}},c={},l=[{value:"Authentication",id:"authentication",level:2},{value:"Create identifier",id:"create-identifier",level:2},{value:"Issue a VC",id:"issue-a-vc",level:2},{value:"Request body:",id:"request-body",level:3},{value:"Expected response:",id:"expected-response",level:3},{value:"Verify a Vc",id:"verify-a-vc",level:2},{value:"Request body:",id:"request-body-1",level:3},{value:"Expected response:",id:"expected-response-1",level:3},{value:"Render a Vc",id:"render-a-vc",level:2},{value:"Request body:",id:"request-body-2",level:3},{value:"Expected response:",id:"expected-response-2",level:3},{value:"Issuing a status VC",id:"issuing-a-status-vc",level:2},{value:"Request body:",id:"request-body-3",level:3},{value:"Expected response:",id:"expected-response-3",level:3},{value:"Revoking a VC",id:"revoking-a-vc",level:2},{value:"Request body:",id:"request-body-4",level:3},{value:"Expected response:",id:"expected-response-4",level:3},{value:"Activating a VC",id:"activating-a-vc",level:2},{value:"Request body:",id:"request-body-5",level:3},{value:"Expected response:",id:"expected-response-5",level:3}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"basic-operations",children:"Basic Operations"}),"\n",(0,s.jsx)(r.Ay,{}),"\n",(0,s.jsxs)(n.p,{children:["Let's use the API docs at ",(0,s.jsx)(n.a,{href:"http://localhost:3332/api-docs",children:(0,s.jsx)(n.code,{children:"http://localhost:3332/api-docs"})})," to try some basic functions."]}),"\n",(0,s.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsxs)(n.p,{children:["Based on your agent configuration, you may need to provide an API key to access the API, the configuration for authentication middleware plugin ",(0,s.jsx)(n.a,{href:"/docs/agent-configuration/config-agent-file#authentication-middleware-plugin",children:"here"}),". If you have an API key, you can add it to the request header for every request like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-curl",children:"curl 'http://localhost:3332/agent/didManagerFind' \\\n  -H 'Authorization: Bearer your_api_key' \\\n  --data-raw '{}'\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Or if you try with the API docs, you can add the API key to the ",(0,s.jsx)(n.a,{href:"http://localhost:3332/api-docs#auth",children:"Authentication section"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Authentication section",src:t(474).A+"",width:"752",height:"202"})}),"\n",(0,s.jsx)(n.h2,{id:"create-identifier",children:"Create identifier"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsxs)(n.a,{href:"/docs/get-started/did-web/how-to-create/hosting-did-web",children:["Go here to create a ",(0,s.jsx)(n.code,{children:"did:web"})]})})}),"\n",(0,s.jsx)(n.h2,{id:"issue-a-vc",children:"Issue a VC"}),"\n",(0,s.jsxs)(n.p,{children:["To issue a VC, we use this endpoint ",(0,s.jsx)(n.a,{href:"http://localhost:3332/api-docs/#post-/createVerifiableCredential",children:(0,s.jsx)(n.code,{children:"/createVerifiableCredential"})}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"request-body",children:"Request body:"}),"\n",(0,s.jsx)(n.p,{children:"Copy the issuer id from last step, then replace the issuer.id in the request by it."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "credential": {\n    "issuanceDate": "2024-04-19T03:24:09.927Z",\n    "@context": ["https://www.w3.org/2018/credentials/v1", "https://www.w3.org/2018/credentials/v1", "https://www.w3.org/2018/credentials/examples/v1", "https://vckit-contexts.s3.ap-southeast-2.amazonaws.com/dev-render-method-context.json"],\n    "type": ["VerifiableCredential", "UniversityDegreeCredential"],\n    "credentialSubject": {\n      "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",\n      "name": "Jane Smith",\n      "degree": {\n        "type": "BachelorDegree",\n        "name": "Bachelor of Science and Arts",\n        "degreeSchool": "Example University"\n      }\n    },\n    "render": [\n      {\n        "template": "<div style=\\"width:300px; height:100px; border: 2px solid black; text-align:center\\">\\n  <div>\\n    This {{credentialSubject.degree.name}} is conferred to\\n  </div>\\n  <strong style=\\"font-size: 16px\\">\\n    {{credentialSubject.name}}\\n  </strong>\\n  <div>\\n    by {{credentialSubject.degree.degreeSchool}}.\\n  </div>\\n</div>",\n        "@type": "WebRenderingTemplate2022"\n      }\n    ],\n    "issuer": {\n      "id": "did:web:example.com"\n    }\n  },\n  "proofFormat": "lds",\n  "save": true,\n  "fetchRemoteContexts": true\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"expected-response",children:"Expected response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "issuanceDate": "2024-04-19T03:24:09.927Z",\n  "@context": ["https://www.w3.org/2018/credentials/v1", "https://www.w3.org/2018/credentials/examples/v1", "https://vckit-contexts.s3.ap-southeast-2.amazonaws.com/dev-render-method-context.json"],\n  "type": ["VerifiableCredential", "UniversityDegreeCredential"],\n  "credentialSubject": {\n    "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",\n    "name": "Jane Smith",\n    "degree": {\n      "type": "BachelorDegree",\n      "name": "Bachelor of Science and Arts",\n      "degreeSchool": "Example University"\n    }\n  },\n  "render": [\n    {\n      "template": "<div style=\\"width:300px; height:100px; border: 2px solid black; text-align:center\\">\\n  <div>\\n    This {{credentialSubject.degree.name}} is conferred to\\n  </div>\\n  <strong style=\\"font-size: 16px\\">\\n    {{credentialSubject.name}}\\n  </strong>\\n  <div>\\n    by {{credentialSubject.degree.degreeSchool}}.\\n  </div>\\n</div>",\n      "@type": "WebRenderingTemplate2022"\n    }\n  ],\n  "issuer": {\n    "id": "did:web:example.com"\n  },\n  "proof": {\n    "type": "Ed25519Signature2018",\n    "created": "2024-04-19T03:25:52Z",\n    "verificationMethod": "did:web:example.com#z6MkrUzzgZdYToqpqcpK2wrTmsdPtGXLBnJrZ4mVUjetBUED",\n    "proofPurpose": "assertionMethod",\n    "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..Oha3rvy0-aqPBcwwGIWMYHvNd_37y4Cuf9krKkprbyeUsn0ZpQ-wE7n8liSj6kecKMQQceM4htkuC1yWVCF1DA"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"verify-a-vc",children:"Verify a Vc"}),"\n",(0,s.jsxs)(n.p,{children:["We use this ",(0,s.jsx)(n.a,{href:"http://localhost:3332/api-docs/#post-/verifyCredential",children:(0,s.jsx)(n.code,{children:"/verifyCredential"})})," to verify a VC. You can try with this request body, but remember to replace the ",(0,s.jsx)(n.strong,{children:"issuer id"}),", ",(0,s.jsx)(n.strong,{children:"jwt signature"})," by yours (check the response of previous steps)."]}),"\n",(0,s.jsx)(n.h3,{id:"request-body-1",children:"Request body:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "credential": {\n    "issuanceDate": "2024-04-19T03:24:09.927Z",\n    "@context": ["https://www.w3.org/2018/credentials/v1", "https://www.w3.org/2018/credentials/examples/v1", "https://vckit-contexts.s3.ap-southeast-2.amazonaws.com/dev-render-method-context.json"],\n    "type": ["VerifiableCredential", "UniversityDegreeCredential"],\n    "credentialSubject": {\n      "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",\n      "name": "Jane Smith",\n      "degree": {\n        "type": "BachelorDegree",\n        "name": "Bachelor of Science and Arts",\n        "degreeSchool": "Example University"\n      }\n    },\n    "render": [\n      {\n        "template": "<div style=\\"width:300px; height:100px; border: 2px solid black; text-align:center\\">\\n  <div>\\n    This {{credentialSubject.degree.name}} is conferred to\\n  </div>\\n  <strong style=\\"font-size: 16px\\">\\n    {{credentialSubject.name}}\\n  </strong>\\n  <div>\\n    by {{credentialSubject.degree.degreeSchool}}.\\n  </div>\\n</div>",\n        "@type": "WebRenderingTemplate2022"\n      }\n    ],\n    "issuer": {\n      "id": "did:web:example.com"\n    },\n    "proof": {\n      "type": "Ed25519Signature2018",\n      "created": "2024-04-19T03:25:52Z",\n      "verificationMethod": "did:web:example.com#z6MkrUzzgZdYToqpqcpK2wrTmsdPtGXLBnJrZ4mVUjetBUED",\n      "proofPurpose": "assertionMethod",\n      "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..Oha3rvy0-aqPBcwwGIWMYHvNd_37y4Cuf9krKkprbyeUsn0ZpQ-wE7n8liSj6kecKMQQceM4htkuC1yWVCF1DA"\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"expected-response-1",children:"Expected response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "verified": true,\n  "results": [\n    {\n      "proof": {\n        "@context": ["https://www.w3.org/2018/credentials/v1", "https://www.w3.org/2018/credentials/examples/v1", "https://vckit-contexts.s3.ap-southeast-2.amazonaws.com/dev-render-method-context.json"],\n        "type": "Ed25519Signature2018",\n        "created": "2024-04-19T03:25:52Z",\n        "verificationMethod": "did:web:example.com#z6MkrUzzgZdYToqpqcpK2wrTmsdPtGXLBnJrZ4mVUjetBUED",\n        "proofPurpose": "assertionMethod",\n        "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..Oha3rvy0-aqPBcwwGIWMYHvNd_37y4Cuf9krKkprbyeUsn0ZpQ-wE7n8liSj6kecKMQQceM4htkuC1yWVCF1DA"\n      },\n      "verified": true,\n      "verificationMethod": {\n        "@context": ["https://www.w3.org/ns/did/v1", "https://w3id.org/security/suites/ed25519-2018/v1", "https://w3id.org/security/suites/x25519-2019/v1"],\n        "id": "did:web:example.com#z6MkrUzzgZdYToqpqcpK2wrTmsdPtGXLBnJrZ4mVUjetBUED",\n        "type": "Ed25519VerificationKey2018",\n        "controller": {\n          "id": "did:web:example.com#z6MkrUzzgZdYToqpqcpK2wrTmsdPtGXLBnJrZ4mVUjetBUED"\n        },\n        "publicKeyBase58": "D2jx6KP78GMMj7ycMNtcvn5Q4hFUmu4Vs3rZeTgsGFSq"\n      },\n      "purposeResult": {\n        "valid": true\n      },\n      "log": [\n        {\n          "id": "expiration",\n          "valid": true\n        },\n        {\n          "id": "valid_signature",\n          "valid": true\n        },\n        {\n          "id": "issuer_did_resolves",\n          "valid": true\n        },\n        {\n          "id": "revocation_status",\n          "valid": true\n        }\n      ]\n    }\n  ],\n  "statusResult": {\n    "verified": true\n  },\n  "log": [\n    {\n      "id": "expiration",\n      "valid": true\n    },\n    {\n      "id": "valid_signature",\n      "valid": true\n    },\n    {\n      "id": "issuer_did_resolves",\n      "valid": true\n    },\n    {\n      "id": "revocation_status",\n      "valid": true\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"render-a-vc",children:"Render a Vc"}),"\n",(0,s.jsxs)(n.p,{children:["This feature is handled by VCkit Renderer plugin, check it out in the npm ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/@uncefact/vckit-renderer",children:"here"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["To get the rendered VC, you can try this endpoint ",(0,s.jsx)(n.a,{href:"http://localhost:3332/api-docs/#post-/renderCredential",children:(0,s.jsx)(n.code,{children:"/renderCredential"})}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"request-body-2",children:"Request body:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "credential": {\n    "issuanceDate": "2024-04-19T03:24:09.927Z",\n    "@context": ["https://www.w3.org/2018/credentials/v1", "https://www.w3.org/2018/credentials/examples/v1", "https://vckit-contexts.s3.ap-southeast-2.amazonaws.com/dev-render-method-context.json"],\n    "type": ["VerifiableCredential", "UniversityDegreeCredential"],\n    "credentialSubject": {\n      "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",\n      "name": "Jane Smith",\n      "degree": {\n        "type": "BachelorDegree",\n        "name": "Bachelor of Science and Arts",\n        "degreeSchool": "Example University"\n      }\n    },\n    "render": [\n      {\n        "template": "<div style=\\"width:300px; height:100px; border: 2px solid black; text-align:center\\">\\n  <div>\\n    This {{credentialSubject.degree.name}} is conferred to\\n  </div>\\n  <strong style=\\"font-size: 16px\\">\\n    {{credentialSubject.name}}\\n  </strong>\\n  <div>\\n    by {{credentialSubject.degree.degreeSchool}}.\\n  </div>\\n</div>",\n        "@type": "WebRenderingTemplate2022"\n      }\n    ],\n    "issuer": {\n      "id": "did:web:example.com"\n    },\n    "proof": {\n      "type": "Ed25519Signature2018",\n      "created": "2024-04-19T03:25:52Z",\n      "verificationMethod": "did:web:example.com#z6MkrUzzgZdYToqpqcpK2wrTmsdPtGXLBnJrZ4mVUjetBUED",\n      "proofPurpose": "assertionMethod",\n      "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..Oha3rvy0-aqPBcwwGIWMYHvNd_37y4Cuf9krKkprbyeUsn0ZpQ-wE7n8liSj6kecKMQQceM4htkuC1yWVCF1DA"\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"expected-response-2",children:"Expected response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "documents": ["PGRpdiBzdHlsZT0id2lkdGg6MzAwcHg7IGhlaWdodDoxMDBweDsgYm9yZGVyOiAycHggc29saWQgYmxhY2s7IHRleHQtYWxpZ246Y2VudGVyIj4KICA8ZGl2PgogICAgVGhpcyBCYWNoZWxvciBvZiBTY2llbmNlIGFuZCBBcnRzIGlzIGNvbmZlcnJlZCB0bwogIDwvZGl2PgogIDxzdHJvbmcgc3R5bGU9ImZvbnQtc2l6ZTogMTZweCI+CiAgICBKYW5lIFNtaXRoCiAgPC9zdHJvbmc+CiAgPGRpdj4KICAgIGJ5IEV4YW1wbGUgVW5pdmVyc2l0eS4KICA8L2Rpdj4KPC9kaXY+"]\n}\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The document value is a string which is a encoded HTML string. You can use any online ",(0,s.jsx)(n.a,{href:"https://www.base64decode.org/",children:"Base64"})," tool out there to decode it. Good luck!"]})}),"\n",(0,s.jsx)(n.h2,{id:"issuing-a-status-vc",children:"Issuing a status VC"}),"\n",(0,s.jsxs)(n.p,{children:["To issue a status VC, use the following VCKit API endpoint: ",(0,s.jsx)(n.a,{href:"http://localhost:3332/agent/issueBitstringStatusList",children:"/agent/issueBitstringStatusList"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Once you have the status VC, you can inject it into the issuing VC payload. After issuing a VC with a status VC, the VC can now be revoked or activated, and its status is managed by the VC issuer."}),"\n",(0,s.jsx)(n.h3,{id:"request-body-3",children:"Request body:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n\t"statusPurpose": "revocation",\n\t"bitstringStatusIssuer": "did:web:example.com"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"expected-response-3",children:"Expected response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n\t"id": "http://localhost:3332/credentials/status/bitstring-status-list/26#0",\n\t"type": "BitstringStatusListEntry",\n\t"statusPurpose": "revocation",\n\t"statusListIndex": 0,\n\t"statusListCredential": "http://localhost:3332/credentials/status/bitstring-status-list/26"\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"revoking-a-vc",children:"Revoking a VC"}),"\n",(0,s.jsxs)(n.p,{children:["To revoke a VC, use the following VCKit API endpoint: ",(0,s.jsx)(n.a,{href:"http://localhost:3332/agent/setBitstringStatus",children:"/agent/setBitstringStatus"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"request-body-4",children:"Request body:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "statusListCredential": "http://localhost:3332/credentials/status/bitstring-status-list/26",\n  "statusListVCIssuer": "did:web:example.com",\n  "statusPurpose": "revocation",\n  "index": 0,\n  "status": true\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"expected-response-4",children:"Expected response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": true\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"activating-a-vc",children:"Activating a VC"}),"\n",(0,s.jsxs)(n.p,{children:["To activate a VC, use the following VCKit API endpoint: ",(0,s.jsx)(n.a,{href:"http://localhost:3332/agent/setBitstringStatus",children:"/agent/setBitstringStatus"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"request-body-5",children:"Request body:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "statusListCredential": "http://localhost:3332/credentials/status/bitstring-status-list/26",\n  "statusListVCIssuer": "did:web:example.com",\n  "statusPurpose": "revocation",\n  "index": 0,\n  "status": false\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"expected-response-5",children:"Expected response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": false\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},474:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/authentication-section-ee0d66b2c9b97a4a51d550ad71b12760.png"},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>d});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);